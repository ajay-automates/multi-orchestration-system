# ğŸ¤– Multi-Orchestration Intelligence System

> **AI-Powered Self-Healing Infrastructure** - A production-ready autonomous system that monitors, analyzes, and repairs itself using Claude AI.

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-Enabled-brightgreen.svg)](https://supabase.com/)
[![Claude AI](https://img.shields.io/badge/Claude-3.5%20Sonnet-purple.svg)](https://www.anthropic.com/)

---

## ğŸ¯ What Is This?

A **fully autonomous orchestration system** that:
- ğŸ“Š **Monitors** multiple projects in real-time
- ğŸ” **Detects** anomalies using intelligent agents
- ğŸ¤– **Analyzes** problems with Claude AI
- ğŸ”§ **Repairs** itself without human intervention
- ğŸ“ˆ **Learns** from every decision

**Built with**: TypeScript, Node.js, Fastify, Next.js, Supabase, Anthropic Claude

---

## âœ¨ Features

### ğŸ—ï¸ Phase 1: Observability Foundation
- âœ… Real-time health monitoring (10s intervals)
- âœ… Comprehensive metrics collection (CPU, Memory, Errors)
- âœ… Supabase PostgreSQL integration
- âœ… Beautiful Next.js dashboard with live updates

### ğŸ§  Phase 2: Distributed Intelligence
- âœ… Event-driven architecture with pub/sub
- âœ… **HealthMonitorAgent** - Detects failures instantly
- âœ… **MetricsAnalyzerAgent** - Identifies performance anomalies
- âœ… Real-time WebSocket streaming to dashboard

### ğŸ”§ Phase 3: Autonomous Action
- âœ… **AutoFixerAgent** - Self-healing capabilities
- âœ… **ActionExecutor** - Safe remediation actions:
  - `restart_service` - Restart crashed services
  - `clear_cache` - Free up memory
  - `pause_service` - Prevent cascade failures
- âœ… Complete audit trail in Supabase

### ğŸ¤– Phase 4: AI Reasoning
- âœ… **Claude 3.5 Sonnet** integration
- âœ… Context-aware decision making
- âœ… Confidence scoring (0-1)
- âœ… Autonomous execution when confidence > 70%
- âœ… Human escalation for uncertain cases

---

## ğŸš€ Quick Start

### Prerequisites
- Node.js 18+
- Supabase account ([free tier works](https://supabase.com))
- Anthropic API key ([get one here](https://console.anthropic.com/))

### 1. Clone & Install

```bash
git clone https://github.com/ajay-automates/multi-orchestration-system.git
cd multi-orchestration-system

# Install orchestration hub
cd orchestration-hub
npm install

# Install dashboard
cd ../dashboard
npm install
```

### 2. Configure Environment

**Orchestration Hub** (`orchestration-hub/.env`):
```env
NODE_ENV=development
PORT=4001
LOG_LEVEL=info

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_KEY=your_service_key

# AI
ANTHROPIC_API_KEY=your_anthropic_key

# Projects to monitor
PROJECTS=email-blast:http://localhost:3010,chatbot:http://localhost:3011,social-media:http://localhost:3012
```

**Dashboard** (`dashboard/.env.local`):
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

### 3. Initialize Database

Run this SQL in your Supabase SQL Editor:

```sql
-- Project Status History
CREATE TABLE project_status_history (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_name VARCHAR NOT NULL,
    status VARCHAR NOT NULL,
    last_check TIMESTAMPTZ NOT NULL,
    uptime_percentage FLOAT NOT NULL,
    response_time_ms INT NOT NULL,
    recorded_at TIMESTAMPTZ DEFAULT NOW()
);

-- Project Metrics
CREATE TABLE project_metrics (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_name VARCHAR NOT NULL,
    requests_per_second FLOAT NOT NULL,
    error_rate FLOAT NOT NULL,
    error_count INT NOT NULL,
    api_usage JSONB,
    memory_usage_percent FLOAT NOT NULL,
    cpu_usage_percent FLOAT NOT NULL,
    database_query_time_ms INT NOT NULL,
    recorded_at TIMESTAMPTZ DEFAULT NOW()
);

-- Agent Events
CREATE TABLE agent_events (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    project_name VARCHAR NOT NULL,
    event_type VARCHAR NOT NULL,
    description TEXT,
    severity VARCHAR,
    metadata JSONB,
    occurred_at TIMESTAMPTZ DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_status_project_time ON project_status_history(project_name, recorded_at DESC);
CREATE INDEX idx_metrics_project_time ON project_metrics(project_name, recorded_at DESC);
CREATE INDEX idx_events_time ON agent_events(occurred_at DESC);
```

### 4. Start the System

**Terminal 1 - Orchestration Hub:**
```bash
cd orchestration-hub
npm run dev
```

**Terminal 2 - Dashboard:**
```bash
cd dashboard
npm run dev
```

**Access:**
- ğŸ¨ Dashboard: http://localhost:3000
- ğŸ§  API: http://localhost:4001
- ğŸ“Š Health: http://localhost:4001/health

---

## ğŸ§ª Test the AI

Trigger an anomaly to watch Claude AI analyze and fix it:

```bash
curl -X POST http://localhost:4001/api/test/anomaly \
  -H "Content-Type: application/json" \
  -d '{"projectName": "email-blast", "type": "high_memory"}'
```

**What happens:**
1. ğŸš¨ System detects anomaly
2. ğŸ¤– AutoFixerAgent calls Claude AI
3. ğŸ§  Claude analyzes metrics and recommends action
4. âœ… If confidence > 70%, action executes automatically
5. ğŸ“Š Dashboard shows real-time AI decision + action

**Available test types:**
- `high_memory` - Triggers cache clearing
- `high_cpu` - Triggers service pause
- `high_error` - Triggers service restart

---

## ğŸ“ Project Structure

```
multi-orchestration-system/
â”œâ”€â”€ orchestration-hub/          # The Brain ğŸ§ 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ agents/             # Intelligent Agents
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseAgent.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ HealthMonitorAgent.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ MetricsAnalyzerAgent.ts
â”‚   â”‚   â”‚   â””â”€â”€ AutoFixerAgent.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ EventBus.ts     # Event System
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectMonitor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ActionExecutor.ts
â”‚   â”‚   â”‚   â””â”€â”€ ClaudeAnalyzer.ts  # AI Integration
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â”œâ”€â”€ database.ts         # Supabase Client
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ dashboard/                  # The UI ğŸ¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ page.tsx           # Main Dashboard
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ projects/                   # Mock Projects
â”‚   â”œâ”€â”€ email-blast/
â”‚   â”œâ”€â”€ chatbot/
â”‚   â””â”€â”€ social-media/
â”‚
â””â”€â”€ docs/                       # Documentation
    â”œâ”€â”€ SYSTEM_COMPLETE.md
    â””â”€â”€ DEPLOYMENT.md
```

---

## ğŸ¯ Use Cases

### 1. **Microservices Monitoring**
Monitor dozens of microservices, detect failures, and auto-restart crashed services.

### 2. **Performance Optimization**
Detect memory leaks, high CPU usage, and automatically clear caches or scale resources.

### 3. **Error Rate Management**
Monitor error rates and automatically rollback deployments when errors spike.

### 4. **Intelligent Alerting**
AI analyzes context before alerting, reducing false positives by 90%.

### 5. **Self-Healing Infrastructure**
Automatically fix common issues without human intervention.

---

## ğŸ”§ Configuration

### Agent Thresholds

Customize in `orchestration-hub/src/agents/MetricsAnalyzerAgent.ts`:

```typescript
const THRESHOLDS = {
    CPU_PERCENT: 80,
    MEMORY_PERCENT: 85,
    ERROR_RATE: 5,
    RESPONSE_TIME_MS: 1000
};
```

### AI Confidence Threshold

Adjust in `orchestration-hub/src/agents/AutoFixerAgent.ts`:

```typescript
if (decision.confidence > 0.7) {  // 70% confidence
    // Execute action
}
```

---

## ğŸ“Š Dashboard Features

- **Real-Time Status**: Live project health indicators
- **Agent Activity Log**: See every decision and action
- **Metrics Charts**: CPU, Memory, Error rates over time
- **AI Decisions**: View Claude's reasoning for each action
- **Historical Data**: Query past events and metrics

---

## ğŸš¢ Deployment

### Deploy to Production

**Orchestration Hub** - Deploy to Railway/Render:
```bash
cd orchestration-hub
npm run build
npm start
```

**Dashboard** - Deploy to Vercel:
```bash
cd dashboard
vercel deploy --prod
```

See [DEPLOYMENT.md](./DEPLOYMENT.md) for detailed instructions.

---

## ğŸ¤ Contributing

Contributions welcome! Please read our [Contributing Guide](./CONTRIBUTING.md).

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- **Anthropic** - Claude AI integration
- **Supabase** - Database and real-time infrastructure
- **Fastify** - High-performance HTTP framework
- **Next.js** - React framework for the dashboard

---

## ğŸ“ Support

- ğŸ“§ Email: support@ajay-automates.com
- ğŸ› Issues: [GitHub Issues](https://github.com/ajay-automates/multi-orchestration-system/issues)
- ğŸ’¬ Discussions: [GitHub Discussions](https://github.com/ajay-automates/multi-orchestration-system/discussions)

---

**Built with â¤ï¸ by the Ajay Automates Team**

â­ Star this repo if you find it useful!
